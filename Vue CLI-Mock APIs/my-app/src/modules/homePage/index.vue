<template>
  <div>
    <div class="form-container">
      <h1 class="text-center mr-2" ref="titleHeight" style="display: inline-block">Home</h1>
      <h1 class="text-center position-relative highlight" style="display: inline-block">Color <div class="absolute-border"></div></h1>
      <!-- <el-carousel :interval="4000" type="card" height="200px">
        <el-carousel-item v-for="(item, index) in data" :key="index">
          <div class="background-carousel" :style="{backgroundImage:`url(${item.avatar})`}"></div>
        </el-carousel-item>
      </el-carousel> -->
      <div>
        <svg viewBox="0 0 120 120" class="container-dashed">
          <circle cx="65" cy="55" r="50" class="dashed" />
          <foreignObject x="0" y="0" height="110px" width="130px">
            <div class="background-avatar" style="background-image: url('https://www.vhv.rs/dpng/d/454-4540173_clever-man-icon-female-product-owner-icon-hd.png')"></div>
            <svg class="dot-run" width="20" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.304 1.356C8.09 1.105 8.809.659 9.575.379a7.1 7.1 0 00-2.342.493 6.75 6.75 0 00-1.523.877c.116-.025.236-.04.349-.064.42-.093.836-.199 1.245-.33z" fill="#5CA2D5"/><path d="M11.639 11.36a23.497 23.497 0 002.845-1.56c.874-.563 1.643-1.28 2.521-1.826a.117.117 0 01.054-.017c.04-.049.084-.095.13-.138a.076.076 0 01.083-.016c-.002-.024-.002-.05-.003-.075a67.65 67.65 0 01-3.16 1.897 23.2 23.2 0 01-3.6 1.752c-1.361.481-2.77.836-4.156 1.232-.372.106-.875.266-1.437.418.187.075.366.172.532.288.996-.332 2.067-.473 3.076-.778a23.812 23.812 0 003.115-1.177z" fill="#91CCF4"/><path d="M6.602 7.575c-.651.125-1.275.351-1.933.48a7.409 7.409 0 01-1.967.084 6.48 6.48 0 00.062 1.176 17.922 17.922 0 003.838-1.74z" fill="#5CA2D5"/><path d="M7.262 7.183a.154.154 0 01.078.285 18.286 18.286 0 01-4.52 2.153c.038.166.085.33.142.491 1.05-.422 2.232-.603 3.302-1a24.634 24.634 0 003.392-1.564c2.204-1.225 4.01-2.82 5.89-4.457a7.406 7.406 0 00-.96-1.042.099.099 0 01-.017.131C11.374 5.176 6.949 6.29 2.747 7.166c-.017.248-.028.495-.037.739.801-.077 1.583-.064 2.375-.272.707-.229 1.437-.38 2.177-.45z" fill="#91CCF4"/><path d="M19.128 5.631c.343-.674.683-1.68.375-2.401-.647-1.511-2.646-.924-3.811-.521l-.01.002c.155.198.308.4.455.606.616-.276 1.606-.442 2.069.129.526.648-.07 1.549-.584 1.988-.89.762-2.065 1.262-3.085 1.833-1.212.679-2.421 1.362-3.637 2.036-2.3 1.276-4.716 2.367-7.41 2.428-.753.017-1.63-.156-1.774-1.024a1.058 1.058 0 01.719-1.184 5.653 5.653 0 01-.097-.799 11.97 11.97 0 01-.012-.331c-.873.616-1.59 1.374-1.842 2.453-.182.781-.045 1.686.822 2.002.574.21 1.268.163 1.864.1 1.327-.14 2.615-.58 3.89-.945 1.249-.357 2.52-.675 3.732-1.143 2.427-.94 4.723-2.447 6.884-3.863.579-.378 1.133-.737 1.452-1.366zm-17.56 6.843c-.146.085-.325-.108-.407-.21a.73.73 0 01-.192-.475c.007-.083.126-.13.173-.046.054.136.127.264.215.381.08.086.244.16.25.286a.074.074 0 01-.04.064zm.582.032c-.095.059-.219-.01-.306-.057a1.322 1.322 0 01-.287-.212c-.097-.093.052-.239.148-.146.073.071.156.132.245.18.074.04.187.065.223.149a.065.065 0 01-.023.086zm.745-.287c-.002 0-.004 0-.005-.002a.007.007 0 01-.002-.005c0-.002 0-.004.002-.005a.007.007 0 01.005-.002c.002 0 .004 0 .005.002a.007.007 0 01-.004.012zm14.88-5.915a.007.007 0 01-.006-.001l-.002-.003v-.003-.003l.002-.002a.007.007 0 01.006-.002c.002 0 .004.001.005.003a.007.007 0 010 .009.007.007 0 01-.005.002zm.212-.112a.077.077 0 01-.103.027.077.077 0 01-.029-.027.99.99 0 01-.014-.515.08.08 0 01.16 0 .986.986 0 01-.014.515zm.47-.441a2.533 2.533 0 01-.024-.646.122.122 0 01.243 0c.02.215.011.432-.024.646a.101.101 0 01-.16.053.101.101 0 01-.036-.053h.001z" fill="#FBAF2A"/><path d="M17.069 8.25c-.689.744-1.677 1.35-2.525 1.888a23.794 23.794 0 01-6.052 2.734c-.895.257-1.887.553-2.838.585.163.119.332.228.507.327.244.13.495.247.751.35a.15.15 0 01.048-.024c1.975-.656 3.915-1.252 5.786-2.179 1.636-.81 3.568-1.745 4.515-3.364a5.63 5.63 0 00.018-.553.801.801 0 01-.21.235z" fill="#5CA2D5"/><path d="M13.141 12.076c-1.806.92-3.785 1.781-5.788 2.221.27.092.546.17.825.233.469.107.947.168 1.428.185 1.156-.541 2.386-.905 3.51-1.542 1.295-.733 2.383-1.666 3.532-2.59a.139.139 0 01.076-.03c.243-.514.41-1.06.494-1.623-.867 1.508-2.548 2.367-4.077 3.146z" fill="#91CCF4"/><path d="M14.53 2.002a6.291 6.291 0 00-1.55-.998.328.328 0 00-.057.09.666.666 0 01-.028.056l-.006.008a.134.134 0 01-.04.115 15.286 15.286 0 01-9.944 4.624 8.963 8.963 0 00-.133.956c4.146-.96 8.325-2.054 11.633-4.833a.117.117 0 01.125-.018zM10.72 14.674a7.864 7.864 0 001.748-.396 7.576 7.576 0 003.863-3.012 13.338 13.338 0 01-1.915 1.484c-.352.23-.748.468-1.14.69a16.39 16.39 0 01-2.556 1.234z" fill="#5CA2D5"/><path d="M12.598 1.004a.296.296 0 01.093-.121c-.037-.014-.073-.03-.11-.043a7.872 7.872 0 00-1.138-.313.134.134 0 01-.062.074 35.649 35.649 0 01-4.139 2.057 32.72 32.72 0 01-2.016.77c-.444.152-.943.402-1.415.327-.308.456-.554.951-.732 1.472-.048.143-.087.29-.123.439a16.132 16.132 0 009.633-4.552.196.196 0 01.009-.11z" fill="#5CA2D5"/><path d="M8.886 9.092c-.074.029-.14.063-.212.087-.02.025-.042.047-.06.073a.652.652 0 00-.067.11c-.027.063-.04.063.03.075a.557.557 0 00.254-.048c.071-.025.49-.252.374-.362-.038-.038-.276.049-.319.065z" fill="#fff"/><path d="M14.394 6.068c-.682.56-1.402 1.076-2.116 1.597.332-.075.669-.13 1.008-.162l2.14-1.2c.454-.254.961-.495 1.414-.789a.19.19 0 01-.04-.068 8.292 8.292 0 00-.593-1.339c-.42.779-1.136 1.405-1.813 1.96z" fill="#91CCF4"/><path d="M9.953 7.818a25.266 25.266 0 01-3.475 1.618c-1.038.391-2.26.907-3.39.986.144.312.332.602.558.861a.137.137 0 01.027.05l.235-.02a12.81 12.81 0 002.672-.493c1.583-.47 3.036-1.261 4.467-2.061.49-.274.979-.548 1.467-.823-.29.066-.583.121-.87.185-.14.031-.287-.156-.154-.258.851-.653 1.707-1.305 2.543-1.975.77-.616 1.358-1.34 2.029-2.036a8.278 8.278 0 00-.382-.581c-1.504 1.871-3.64 3.372-5.727 4.547zm-.969 1.766c-.19.083-.8.194-.7-.196a.977.977 0 01.791-.646.068.068 0 01.058.05.306.306 0 01.305.097c.188.277-.239.6-.454.695z" fill="#5CA2D5"/><path d="M7.688 2.123A42.664 42.664 0 0011.039.457 7.935 7.935 0 009.992.374a.07.07 0 01-.016.024c-.54.533-1.39.828-2.1 1.085-.445.16-.9.292-1.361.395-.098.022-.885.254-.994.187a.045.045 0 01-.035.082c-.097-.022-.099-.025-.15-.101A8.33 8.33 0 003.958 3.54c.614-.09 1.26-.423 1.808-.632a40.046 40.046 0 001.922-.786z" fill="#91CCF4"/><path d="M17.775 6.29h-.003a.007.007 0 00.003.014.007.007 0 00.006-.007c0-.001 0-.003-.002-.004a.007.007 0 00-.004-.003z" fill="#000"/><path d="M19.13 2.22c-1.102-.68-2.42-.281-3.545.107a.197.197 0 00-.12.106l-.079-.099A5.588 5.588 0 0012.991.598 7.99 7.99 0 006.964.582c-1.861.79-3.706 2.736-4.28 4.665a10.143 10.143 0 00-.362 2.84C.81 8.713-.489 10.731.181 12.3c.645 1.512 2.77 1.233 4.477.797.224.508.94.844 1.403 1.084a8.213 8.213 0 006.855.357c2.803-1.122 5.176-3.94 4.716-7.043l.245-.157c.955-.625 1.553-1.219 1.91-2.307.337-1.028.379-2.17-.657-2.81zm-3.45 1.05c.135.189.262.384.381.582-.671.697-1.26 1.42-2.028 2.036-.837.67-1.693 1.322-2.544 1.975-.133.102.015.29.154.258.288-.063.58-.12.87-.185l-1.466.823c-1.432.8-2.884 1.592-4.468 2.061-.87.259-1.766.424-2.672.493l-.234.02a.137.137 0 00-.028-.05 3.612 3.612 0 01-.557-.861c1.13-.08 2.352-.594 3.389-.986 1.198-.45 2.36-.992 3.476-1.618 2.088-1.174 4.224-2.675 5.726-4.548zm1.12 2.177a.192.192 0 00.04.068c-.453.294-.96.534-1.413.789l-2.141 1.2a7.982 7.982 0 00-1.008.162c.715-.521 1.435-1.037 2.117-1.598.675-.555 1.392-1.182 1.813-1.96.236.428.435.876.593 1.338v.001zM16.33 3.6c.317-.124.66-.16.996-.103.4.118.69.782.447 1.168a2.202 2.202 0 01-.363.416c-.088.08-.18.157-.276.229a5.61 5.61 0 00-.803-1.711zM7.235.873A7.1 7.1 0 019.577.38c-.767.28-1.485.726-2.272.977-.41.13-.825.236-1.245.328-.112.025-.232.04-.348.065A6.749 6.749 0 017.234.872v.001zM5.336 2.05c.052.075.053.08.15.1a.045.045 0 00.036-.081c.109.067.896-.165.994-.187.46-.103.915-.236 1.36-.396.711-.257 1.561-.551 2.1-1.084a.07.07 0 00.017-.025c.35.005.7.033 1.047.083a43.002 43.002 0 01-3.351 1.667c-.633.28-1.274.54-1.92.787-.55.21-1.195.543-1.81.632a8.331 8.331 0 011.377-1.497zM3.08 5.228c.179-.52.425-1.015.733-1.471.472.074.97-.176 1.415-.328a32.448 32.448 0 002.016-.77 35.658 35.658 0 004.14-2.056.134.134 0 00.061-.075c.387.076.767.18 1.138.314.037.013.073.028.11.042a.296.296 0 00-.093.121.197.197 0 00-.008.112A16.132 16.132 0 012.958 5.67c.034-.15.074-.298.121-.441zm-.174.67a15.286 15.286 0 009.944-4.625.134.134 0 00.04-.115c.001-.003.004-.005.006-.007a.636.636 0 00.028-.058.329.329 0 01.057-.089 6.29 6.29 0 011.55.998.117.117 0 00-.126.019C11.096 4.799 6.917 5.893 2.772 6.854c.027-.321.071-.64.133-.957zm-.158 1.27c4.203-.878 8.627-1.99 11.822-4.986a.099.099 0 00.018-.132c.352.316.674.665.96 1.042-1.88 1.637-3.686 3.232-5.891 4.458a24.634 24.634 0 01-3.392 1.563c-1.07.397-2.25.578-3.302 1a4.128 4.128 0 01-.141-.491 18.287 18.287 0 004.52-2.152.154.154 0 00-.08-.285c-.739.07-1.469.22-2.176.45-.792.21-1.575.197-2.375.271.01-.243.02-.49.037-.739zm-.045.971c.656.06 1.318.031 1.967-.084.658-.128 1.281-.355 1.933-.48a17.922 17.922 0 01-3.838 1.74 6.478 6.478 0 01-.062-1.176zm.655 3.213a1.88 1.88 0 01-.638-.067.993.993 0 01-.67-.818.85.85 0 01.427-.758c.133.62.438 1.19.88 1.643zm1.558 1.675c.562-.152 1.066-.312 1.437-.418 1.387-.396 2.797-.75 4.156-1.232a23.2 23.2 0 003.6-1.752 65.858 65.858 0 003.16-1.898c.002.025.002.05.003.076a.076.076 0 00-.082.016c-.046.043-.09.089-.13.138a.117.117 0 00-.054.017c-.879.544-1.648 1.262-2.522 1.825a23.48 23.48 0 01-5.96 2.738c-1.008.304-2.08.445-3.076.778a2.631 2.631 0 00-.532-.288zm7.554 1.253a7.853 7.853 0 01-1.748.395 16.374 16.374 0 002.556-1.232 15.552 15.552 0 003.055-2.174 7.575 7.575 0 01-3.863 3.01zm4.256-3.728a.14.14 0 00-.076.03c-1.149.925-2.236 1.858-3.532 2.591-1.124.637-2.354 1-3.51 1.542a7.628 7.628 0 01-1.428-.185 8.347 8.347 0 01-.825-.233c2.002-.44 3.98-1.3 5.788-2.22 1.53-.78 3.21-1.64 4.079-3.147a5.837 5.837 0 01-.496 1.622zm.537-1.986c-.948 1.619-2.88 2.554-4.515 3.365-1.87.927-3.811 1.523-5.786 2.178a.152.152 0 00-.048.025 7.864 7.864 0 01-.751-.35 5.283 5.283 0 01-.507-.328c.951-.031 1.943-.327 2.838-.585a23.792 23.792 0 006.052-2.733c.847-.538 1.836-1.144 2.524-1.889a.8.8 0 00.21-.235c.004.186-.002.37-.017.553zm1.866-2.935c-.319.628-.873.988-1.452 1.367-2.16 1.416-4.457 2.924-6.883 3.863-1.212.468-2.484.786-3.733 1.143-1.275.365-2.563.805-3.89.944-.596.063-1.29.11-1.864-.098-.866-.317-1.004-1.221-.822-2.003.252-1.079.97-1.836 1.842-2.453.003.111.006.222.012.331.013.269.046.535.097.8a1.058 1.058 0 00-.719 1.184c.144.867 1.021 1.04 1.775 1.024 2.694-.061 5.108-1.152 7.41-2.43 1.214-.673 2.424-1.356 3.636-2.035 1.02-.57 2.195-1.07 3.086-1.832.514-.44 1.109-1.341.583-1.989-.463-.57-1.453-.404-2.069-.128-.146-.207-.3-.408-.454-.606l.009-.003c1.165-.403 3.164-.99 3.811.522.309.72-.032 1.724-.375 2.4z" fill="#000"/><path d="M1.357 12.124a1.64 1.64 0 01-.215-.38c-.045-.086-.165-.038-.173.045a.73.73 0 00.192.476c.082.101.262.294.407.209a.074.074 0 00.037-.064c-.005-.126-.17-.2-.248-.286zM2.173 12.418c-.036-.083-.148-.108-.222-.149a1.094 1.094 0 01-.245-.18c-.097-.093-.245.053-.149.146.086.083.183.155.288.212.086.047.21.115.305.057a.065.065 0 00.023-.086zM2.895 12.205c-.002 0-.004 0-.005.002a.007.007 0 00-.002.005c0 .002 0 .004.002.005a.007.007 0 00.005.002c.002 0 .004 0 .005-.002a.007.007 0 00.002-.005c0-.002 0-.004-.002-.005a.007.007 0 00-.005-.002zM18.675 5.104a.122.122 0 00-.206-.082.122.122 0 00-.038.082c-.02.216-.011.433.025.647a.102.102 0 00.193 0c.036-.214.045-.43.026-.647zM18 5.677a.08.08 0 00-.16 0 .99.99 0 00.015.515.078.078 0 00.104.027.077.077 0 00.028-.027.987.987 0 00.013-.515zM9.437 8.89a.306.306 0 00-.305-.097.068.068 0 00-.085-.048.977.977 0 00-.763.644c-.1.39.508.28.7.196.215-.095.643-.42.453-.695zm-.607.498a.557.557 0 01-.255.048c-.069-.012-.057-.012-.03-.074a.653.653 0 01.068-.11c.018-.026.04-.05.06-.074.073-.024.138-.058.212-.086.043-.017.28-.104.32-.066.115.11-.303.337-.374.362H8.83z" fill="#000"/></svg>
          </foreignObject>
        </svg> 
      </div>
      <div class="row">
        <div class="col-md-8">
        </div>
        <div class="col-md-4 text-right" ref="searchHeight">
          <input class="form-control mb-3" v-model="search" @keyup="handleSearch" placeholder="Tìm kiếm..."/>
        </div>
      </div>
      <div class="table-responsive" :style="{height: window.height + 'px'}">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>Avatar</th>
              <th>
                  <span class="mr-2">Name</span>
                  <font-awesome-icon :icon="['fas', 'sort']" class="icon" @click="handleSort(state.sortBy = 'name')" ></font-awesome-icon>
              </th>
              <th>
                <span class="mr-2">Address</span>
                  <font-awesome-icon :icon="['fas', 'sort']" class="icon" @click="handleSort(state.sortBy = 'address')" ></font-awesome-icon>
              </th>
              <th>Phone</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="(item, index) in data" :key="index">
              <td>{{ item.id }}</td>
              <td><img class="avatar mr-3" :src="item.avatar"/></td>
              <td>{{ item.name }} </td>
              <td>{{ item.address }} </td>
              <td>{{ item.phone }} </td>
              <td class="text-center">
                <font-awesome-icon :icon="['fas', 'user']" class="icon"></font-awesome-icon>
              </td>
              <td class="text-center">
                <router-link :to="`/personal/${item.id}`">
                  <font-awesome-icon :icon="['fas', 'edit']" class="icon"></font-awesome-icon>
                </router-link>
              </td>
            </tr>
          </tbody>    
        </table>
       </div>
    </div>
  </div>
</template>

<script>
  import { mapState, mapGetters } from "vuex";
  export default {
    components: {},
    data() {
      return {
        search:'',
        window: {
            width: 0,
            height: 0
        },
        titleHeight: 0,
        searchHeight: 0
      }
    },
    computed: {
      ...mapState({
        state: state => state.$_homePage,
      }),
      ...mapGetters({
        data: "$_homePage/getData",
      })
    },
    async created() {
      var _this = this;
      _this.$Progress.start()
      try {
        await _this.$store.dispatch("$_homePage/getData")
        _this.$Progress.finish()
      } catch(error) {
        console.log(error); 
        _this.$Progress.fail()
      }
      window.addEventListener('resize', _this.handleResize);
      _this.handleResize(); 
      _this.titleHeight = _this.$refs.titleHeight.clientHeight;
      _this.searchHeight = _this.$refs.searchHeight.clientHeight;
      _this.window.height = window.innerHeight - (_this.titleHeight + _this.searchHeight + 152);
    },
    methods:{
      async handleSearch(){
        var _this = this;
        await _this.$store.dispatch("$_homePage/setSearch", _this.search);
        await _this.$store.dispatch("$_homePage/getData");
      },
      async handleSort(){
        var _this = this;
        _this.state.sortDirection = _this.state.sortDirection ==='asc' ? 'desc' : 'asc';
        await _this.$store.dispatch("$_homePage/getData");
      },
      handleResize() {
        var _this = this;
        _this.window.width = window.innerWidth;
        _this.window.height = window.innerHeight;
      }
    },
  };
</script>


<style scoped>
  .table th:first-child,
  .table td:first-child{
    width: 20px;
  }
  table .avatar{
    width: 30px;
    border-radius: 50%;
  }
  table .icon{
    cursor: pointer;
  }
  .form-container{
    /* width: 400px; */
    margin: auto;
  }
  .el-carousel__item h3 {
    color: #475669;
    font-size: 14px;
    opacity: 0.75;
    line-height: 200px;
    margin: 0;
  }

  .el-carousel__item:nth-child(2n) {
    background-color: #99a9bf;
  }

  .el-carousel__item:nth-child(2n+1) {
    background-color: #d3dce6;
  }
  .background-carousel{
    height: 200px;
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
  }

  .container-dashed{
    height: 100px;
    width: 100px;
  }
  circle {
    fill: transparent;
    stroke: #FFAB0A;
    stroke-width: 3;
  }
  .solid{
    stroke-dasharray: none;
  }
  .dashed {
    stroke-dasharray: 14, 15;
  }
  .content{
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
  }

  .highlight{
    color: #FFB62B;
  }

  .absolute-border{
    position: absolute;
    background: #FFE3B0;
    border-radius: 15px;
    width: 100%;
    height: 16px;
    z-index: -1;
    top: 30px;
    left: 15px;
  }

  .dot-run{
    position:absolute;
    top:0; 
    bottom:0; 
    left:0;
    right:0;
    margin:auto;
    animation: circle 6s linear infinite;
    animation-play-state: paused;
    -webkit-animation-play-state: paused;
  }

  .container-dashed:hover .dot-run{
    animation-play-state: played;
    -webkit-animation-play-state: played;
    animation: circle 6s linear infinite;
  }

  .background-avatar{
      width: 60px;
      height: 60px;
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      position: absolute;
      top: 25px;
      left: 35px;
      border-radius: 50%;
  }

  @keyframes circle{
    0%{
      transform:rotate(0deg)
                translate(-48px)
                rotate(0deg);
    
    }
    100%{
      transform:rotate(360deg)
                translate(-48px)
                rotate(-360deg);
    }
  }
</style>